Shader "Raymarching/Compose" 
{
	Properties
	{
		_MainTex("", 2D) = "" {}
	}
		
	Category
	{
		//----------------------------------------------------------------------------------------------------------------------------------------------
		Tags{ "Queue" = "Transparent" }

		//----------------------------------------------------------------------------------------------------------------------------------------------
		CGINCLUDE
		#pragma target 5.0
		#include "UnityCG.cginc"
		#pragma exclude_renderers gles

		uniform sampler2D _MainTex;

		//--------------------------------------------------------------------------------------------------------------------------------------
		struct appdata
		{
			float3	pos			: POSITION;
		};

		//--------------------------------------------------------------------------------------------------------------------------------------
		struct v2f
		{
			float4	pos			: SV_POSITION;
			float4	uv			: TEXCOORD0;
		};

		//--------------------------------------------------------------------------------------------------------------------------------------
		v2f vertSimple(appdata IN)
		{
			v2f OUT;
			OUT.pos = UnityObjectToClipPos(float4(IN.pos,1));
			OUT.uv = ComputeScreenPos(OUT.pos);
			return OUT;
		}
		//--------------------------------------------------------------------------------------------------------------------------------------
		fixed4 frag(v2f IN) : SV_TARGET
		{
			float2 uv = IN.uv.xy / IN.uv.w;
			float4 data = tex2D(_MainTex, uv);
			return data;
		}
		ENDCG

		//----------------------------------------------------------------------------------------------------------------------------------------------
		SubShader
		{
			//------------------------------------------------------------------------------------------------------------------------------------------
			Pass
			{
				Name "Compose"

				//--------------------------------------------------------------------------------------------------------------------------------------
				Cull Front
				ZTest Off
				ZWrite Off
				AlphaTest Off
    			BlendOp Add
				Blend SrcAlpha OneMinusSrcAlpha

				//--------------------------------------------------------------------------------------------------------------------------------------
				CGPROGRAM
				#pragma vertex vertSimple
				#pragma fragment frag
				ENDCG
			} 
		}
	}
}